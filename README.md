# Diplom_py_prof-Bot
## 1. Настройка: 
(информация о запуске в пункте 2.1)
* В файл config.py необходимо вписать свои данные: 
1. Токен пользователя вк от которого будут выполняться запросы
2. Токен самого бота
3. Владельца базы данных
4. Пароль от БД
5. Пользователя БД

* Также существует файл requirements.txt со всеми необходимыми библиотеками 

## 2. Описание кода: 
Программа разбита на 4 py_package:
1. chat_with_user - здесь находится **main**, который и нужно запускать. В этом модуле идёт вызов запросов из других модулей и настроена сама работа бота: как он отвечает на те или иные запросы
2. search_users. 
* get_info_about_user - получаем данные о пользователе бота и список недостающих данных. Также реализован метод для поиска конкретно города юзера.
*  get_profiles - ищём людей, подходящих для пользователя и преобразовываем их в виду id + 3 самые популярные фото
3. databse - work_with_db. Инициализируется схема БД - две таблицы - BotUser (id пользователей бота) и FoundPerson (id юзера бота + найденные для него профили). Таблицы связаны через id юзера бота
4. tests- testing_bot. Модуль тестирования функций

## 3. Описание работы бота 
Главная команда бота это "поиск". 
Запускаем прослушку канала, каждого нового юзера записываем в список (чтобы можно было понять, что у него надо запрашивать всю информацию)
и в бд. Потом идёт проверка на отсуствующие параметры и выводятся соответсвющие сообщения о том, что нужно делать для их заполнения. 
Если все парарметы поиска присутсвует, то начинается поиск людей по 10 человек (но выводится меньше, у кого-то закрыты аккаунты). 
Эти люди записываются в БД, а юзеру выводятся их 3 самых популярных фото и ссылка. 
Также на вывод каждого человека установлено sleep(0.5), но по идее хватит и около 0.3 при идельном интернете и быстром компьютере.
